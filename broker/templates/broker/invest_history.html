<!DOCTYPE html>
{% load static %}
<html class="no-js" lang="en"  >
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="csrf-token" content="ooQ3lA0eh9X0Q35blBVV1spggapqdTvuZntZVdqk">
    <meta name="description" content="Explore a world of real estate opportunities with our comprehensive listings of properties. Whether you&#039;re buying, selling, or investing, our expert agents and brokers are here to guide you through the dynamic market. Discover your dream property today.">
<meta name="keywords" content="real estate, properties, homes, apartments, houses, investments, listings, buying, selling, agents, brokers, market trends, property management, residential, commercial, rentals, mortgages, finance, land, development">
<link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">

<link rel="apple-touch-icon" href="{% static 'images/logo.png' %}">
<title>InvestPrime | Investment History</title>
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon.png' %}">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="InvestPrime | Investment History">

<meta itemprop="name" content="InvestPrime | Investment History">
<meta itemprop="description" content="Explore a world of real estate opportunities with our comprehensive listings of properties. Whether you&#039;re buying, selling, or investing, our expert agents and brokers are here to guide you through the dynamic market. Discover your dream property today.">
<meta itemprop="image" content="{% static 'images/meta.png' %}">

<meta property="og:type" content="website">
<meta property="og:title" content="Connect with InvestPrime: Your Gateway to Real Estate Investment Success!">
<meta property="og:description" content="Welcome to InvestPrime â€“ your premier destination for real estate investment insights and opportunities. Join us on this journey to financial growth through strategic real estate investments tailored to your aspirations.">
<meta property="og:image" content="{% static 'images/meta.png' %}"/>
<meta property="og:image:type" content="image/png"/>
<meta property="og:url" content="https://real-estate.investprime.pro/user/invest-history">

<meta name="twitter:card" content="summary_large_image">

    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}"/>
    <link href="{% static 'css/select2.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/range-slider.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/fancybox.css' %}">

    
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <script src="{% static 'js/fontawesomepro.js' %}"></script>
    <script src="{% static 'js/modernizr.custom.js' %}"></script>

            <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script type="application/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js' %}"></script>
    <script type="application/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js' %}"></script>
    <![endif]-->
</head>
<body >

    <div class="bottom-nav fixed-bottom d-lg-none">
        <div class="link-item active">
            <a href="{% url 'investment_properties' %}">
                <i class="fal fa-project-diagram" aria-hidden="true"></i>
                <span>Invest</span>
            </a>
        </div>
    
        <div class="link-item ">
            <a href="{% url 'add_fund' %}">
                <i class="fal fa-funnel-dollar" aria-hidden="true"></i>
                <span>Deposit</span>
            </a>
        </div>
    
        <div class="link-item ">
            <a href="{% url 'dashboard' %}">
                <i class="fal fa-home-lg-alt"></i>
                <span>Home</span>
            </a>
        </div>
    
        <div class="link-item ">
            <a href="{% url 'payout_history' %}">
                <i class="fal fa-hand-holding-usd" aria-hidden="true"></i>
                <span>Withdraw</span>
            </a>
        </div>
        <div class="link-item ">
            <button onclick="toggleSideMenu()">
                <i class="fal fa-ellipsis-v-alt"></i>
                <span>Menu</span>
            </button>
        </div>
    </div>
    
    <div class="wrapper">
        <!------ sidebar ------->
        <!-- sidebar -->
        <div id="sidebar" class="">
            <div class="sidebar-top">
                <a class="navbar-brand d-none d-lg-block" href="{% url 'dashboard' %}"> <img src="{% static 'images/logo.png' %}" alt="InvestPrime" /></a>
                <div class="mobile-user-area d-lg-none">
                    <div class="thumb">
                        <img class="img-fluid user-img" src="{{request.user.customer.profile_pic.url}}" alt="...">
                                    </div>
                    <div class="content">
                        <h5 class="mt-1 mb-1">{{user.username}}</h5>
                        <span class="">{{request.user.customer.email}}</span>
                                    </div>
                </div>
                <button class="sidebar-toggler d-lg-none" onclick="toggleSideMenu()">
                    <i class="fal fa-times"></i>
                </button>
            </div>
        
            <ul class="main">
                <li>
                    <a class="" href="{% url 'dashboard' %}"><i class="fal fa-house-flood"></i>Dashboard</a>
                </li>
        
                
                <li>
                    <a
                        class="dropdown-toggle propertyMarketActive"
                        data-bs-toggle="collapse"
                        href="#dropdownCollapsible"
                        role="button"
                        aria-expanded="false"
                        aria-controls="collapseExample">
                        <i class="fal fa-car-building"></i>Property Market            </a>
                    <div class="collapse show dropdownCollapsible" id="dropdownCollapsible">
                        <ul class="">
                            <li>
                                <a class="" href="{% url 'investment_properties' %}"><i class="fal fa-sack-dollar"></i>Investment Properties</a>
                            </li>
                                                    <li>
                                    <a class=""  href="{% url 'property_share_market' %}"><i class="fal fa-house-return"></i>Share Market</a>
                                </li>
                                                <li>
                                <a  class="" href="{% url 'my_investment_properties' %}"><i class="fal fa-building"></i>My Properties</a>
                            </li>
                                                    <li>
                                    <a  class="" href="{% url 'my_shared_properties' %}"><i class="fal fa-share-alt"></i>My Shared Properties</a>
                                </li>
                                <li>
                                    <a  class="" href="{% url 'my_offered_properties' %}"><i class="fal fa-paper-plane"></i>Send Offer</a>
                                </li>
                                <li>
                                    <a  class="" href="{% url 'receive_offered_properties' %}"><i class="fal fa-bell-on"></i>Receive Offer</a>
                                </li>
                                            </ul>
                    </div>
                </li>
        
                <li>
                    <a class="active" href="{% url 'invest_history' %}"><i class="fal fa-history"></i>Invest History</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'wish_list_property' %}"><i class="fal fa-heart"></i>WishList</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'add_fund' %}"><i class="fal fa-funnel-dollar"></i>Add Fund</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'fund_history' %}"><i class="fal fa-file-invoice-dollar"></i>Fund History</a>
                </li>
        
        
                <li>
                    <a class="" href="{% url 'money_transfer' %}"><i class="fal fa-exchange-alt"></i>Money Transfer</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'transaction' %}"><i class="fal fa-money-check-alt"></i>Transaction</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'payout' %}"><i class="fal fa-credit-card"></i>Payout</a>
                </li>
                <li>
                    <a class="" href="{% url 'payout_history' %}"><i class="fal fa-usd-square"></i>Payout History</a>
                </li>
                <li>
                    <a class="" href="{% url 'referral' %}"><i class="fal fa-sync"></i>My Referral</a>
                </li>

        
                <li>
                    <a class="" href="{% url 'badges' %}"><i class="fal fa-badge-check"></i>Badges</a>
                </li>
        
                <li>
                    <a class="" href="{% url 'create' %}"><i class="fal fa-ticket"></i>Support ticket</a>
                </li>
        
                <li class="d-lg-none">
                    <a href="{% url 'change_password' %}">
                        <i class="fal fa-lock"></i> Change Password            </a>
                </li>
        
                <li class="d-lg-none">
                    <a href="{% url 'logout' %}" >
                        <i class="fal fa-sign-out-alt"></i> Logout            </a>
    
                </li>
            </ul>
    </div>
    
        <!-- content -->
        <div id="content">
            <div class="overlay">
                <!-- navbar -->
                <nav class="navbar navbar-expand-lg">
                    <div class="container-fluid">
                        <a class="navbar-brand d-lg-none" href="{% url 'dashboard' %}">
                            <img src="{% static 'images/logo.png' %}"
                                 alt="InvestPrime">
                        </a>
                        <button class="sidebar-toggler d-none d-lg-block" onclick="toggleSideMenu()">
                            <i class="far fa-bars"></i>
                        </button>
                        <!-- navbar text -->
                        <span class="navbar-text" id="pushNotificationArea">
                                <!-- notification panel -->
                                                            <div class="notification-panel">
        <button class="dropdown-toggle">
            <i class="fal fa-bell"></i>
            <span class="count" v-cloak>{{items.length}}</span>
        </button>
        <ul class="notification-dropdown">
            <div class="dropdown-box">
                <li v-for="(item, index) in items" @click.prevent="readAt(item.id, item.description.link)">
                    <a class="dropdown-item" href="javascript:void(0)">
                        <i class="fal fa-bell"></i>
                        <div class="text">
                            <p v-cloak v-html="item.description.text"></p>
                            <span class="time" v-cloak>{{ item.formatted_date }}</span>
                        </div>
                    </a>
                </li>
            </div>
    
            <div class="clear-all fixed-bottom">
                <a href="javascript:void(0)" v-if="items.length == 0" class="golden-text">You have no notifications</a>
                <a href="javascript:void(0)" role="button" type="button" v-if="items.length > 0" @click.prevent="readAll" class="btn-clear golden-text">Clear All</a>
            </div>
        </ul>
    </div>
    
    
                                                    <!-- User panel -->
                            <div class="user-panel d-none d-lg-inline-block">
           <span class="profile">
              <img src="{{request.user.customer.profile_pic.url}}"
                   class="img-fluid"
                   alt="user img" />
           </span>
            <ul class="user-dropdown">
                <li>
                    <a href="{% url 'dashboard' %}">
                        <i class="fal fa-border-all"></i> Dashboard
                    </a>
                </li>
                <li>
                    <a href="{% url 'profile' %}">
                        <i class="fal fa-user"></i> My Profile                </a>
                </li>
    
                <li>
                    <a href="{% url 'change_password' %}">
                        <i class="fal fa-lock"></i> Change Password                </a>
                </li>
    
                <li>
                    <a href="{% url 'logout' %}" >
                        <i class="fal fa-sign-out-alt"></i> Logout                </a>
    
                </li>
            </ul>
    </div>
                            </span>
                    </div>
                </nav>
                    <!-- Invest history -->
    <section class="transaction-history">
        <div class="container-fluid">
            <div class="row mt-4 mb-2">
                <div class="col ms-2">
                    <div class="header-text-full">
                        <h3 class="dashboard_breadcurmb_heading mb-1">Investment History</h3>
                        <nav aria-label="breadcrumb" class="ms-2">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">Invest History</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>

            <!-- search area -->
            <div class="search-bar mt-3 me-2 ms-2 p-0">
                <form action="" method="get" enctype="multipart/form-data">
                    <div class="row g-3 align-items-end">
                        <div class="input-box col-lg-2">
                            <label for="">Property</label>
                            <input
                                type="text"
                                name="property"
                                value=""
                                class="form-control"
                                placeholder="Search property"
                            />
                        </div>

                        <div class="input-box col-lg-2">
                            <label for="">Invest Status</label>
                            <select class="form-select" name="invest_status" aria-label="Default select example">
                                <option value="">All Invest</option>
                                <option value="1" >Complete</option>
                                <option value="0" >Due</option>
                            </select>
                        </div>

                        <div class="input-box col-lg-2">
                            <label for="">Return Status</label>
                            <select class="form-select" name="return_status" aria-label="Default select example">
                                <option value="">All</option>
                                <option value="0" >Running</option>
                                <option value="1" >Completed</option>
                            </select>
                        </div>

                        <div class="input-box col-lg-2">
                            <label for="from_date">From Date</label>
                            <input
                                type="text" class="form-control datepicker from_date" name="from_date" value="" placeholder="From date" autocomplete="off" readonly/>
                        </div>
                        <div class="input-box col-lg-2">
                            <label for="to_date">To Date</label>
                            <input
                                type="text" class="form-control datepicker to_date" name="to_date" value="" placeholder="To date" autocomplete="off" readonly disabled="true"/>
                        </div>
                        <div class="input-box col-lg-2">
                            <button class="btn-custom w-100" type="submit"><i class="fal fa-search"></i>Search</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="table-parent table-responsive me-2 ms-2 mt-4">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Investment Amount</th>
                            <th scope="col">Profit</th>
                            <th scope="col">Upcoming Payment</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for investment in investments %}
                                                    <tr class="text-center">
                                
                                <td>{{ investment.amount }}</td>
                                <td>{{ investment.profit }}</td>
                                <td>{{ investment.up_coming }}</td>
                                <td>{{ investment.action }}</td>
                                
                            </tr>
                            {% endfor %}
                                            </tbody>
                </table>
            </div>
        </div>
    </section>

            </div>
    </div>
</div>

        <!-- Modal -->
        
        <div class="modal fade" id="duePaymentModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
             aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md">
                <form action="" method="post" id="invest-form" class="login-form due_payment_modal">
                    <input type="hidden" name="_token" value="ooQ3lA0eh9X0Q35blBVV1spggapqdTvuZntZVdqk">                    <input type="hidden" name="_method" value="put">                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">Due Make Payment</h5>
                            <button type="button" class="close-btn close_invest_modal" data-bs-dismiss="modal"
                                    aria-label="Close">
                                <i class="fal fa-times"></i>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div class="card">
                                <div class="m-3 mb-0 payment-method-details property-title font-weight-bold">
                                </div>

                                <div class="card-body">
                                    <div class="estimation-box">
                                        <div class="details_list">
                                            <ul>
                                                <li class="d-flex justify-content-between"><span>Fixed Invest</span>
                                                    <span class="fixed_invest"></span></li>
                                                <li class="d-flex justify-content-between totalInstallment">
                                                    <span>Total Installment</span><span
                                                        class="total_installments"></span></li>

                                                <li class="d-flex justify-content-between dueInstallment">
                                                    <span>Due Installment</span><span
                                                        class="due_installments"></span></li>

                                                <li class="d-flex justify-content-between dueInstallment">
                                                    <span>Installment Amount</span><span
                                                        class="installment_amount"></span></li>

                                                <li class="d-flex justify-content-between installmentDuration">
                                                    <span>Installment Duration</span> <span
                                                        class="installment_duration"></span></li>

                                                <li class="d-flex justify-content-between installmentLastDate">
                                                    <span>Installment Last Date</span> <span
                                                        class="installment_last_date"></span></li>

                                                <li class="d-flex justify-content-between installmentLateFee">
                                                    <span>Installment Late Fee</span> <span
                                                        class="installment_late_fee"></span></li>

                                                <li class="d-flex justify-content-between previousTotalPay">
                                                    <span>Previous Total Pay</span> <span
                                                        class="previous_total_pay"></span></li>

                                                <li class="d-flex justify-content-between previousTotalPay">
                                                    <span>Due Amount</span> <span
                                                        class="total_due_amount"></span></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row g-3 investModalPaymentForm">
                                        <div class="input-box col-12">
                                            <label for="">Select Wallet</label>
                                            <select class="form-control form-select" id="exampleFormControlSelect1"
                                                    name="balance_type">
                                                                                                    <option
                                                        value="balance">Deposit Balance - $30</option>
                                                    <option
                                                        value="interest_balance">Interest Balance -$0</option>
                                                                                            </select>
                                        </div>

                                        <div class="input-box col-12 payInstallment d-none">
                                            <div class="form-check">
                                                <input type="hidden" value="" class="set_installment_amount">
                                                <input type="hidden" value="" class="set_totalDue_amount">
                                                <input type="hidden" value="" class="set_get_installment_date">
                                                <input type="hidden" value="" class="set_total_due_amount">
                                                <input type="hidden" value="" class="set_installment_late_fee">
                                                <input class="form-check-input" type="checkbox" value="0"
                                                       name="pay_installment" id="pay_installment"/>
                                                <label class="form-check-label"
                                                       for="pay_installment">Pay Installment</label>
                                            </div>
                                        </div>

                                        <div class="input-box col-12">
                                            <label for="">Amount</label>
                                            <div class="input-group">
                                                <input
                                                    type="text" class="invest-amount form-control" name="amount" id="amount"
                                                    value=""
                                                    onkeyup="this.value = this.value.replace (/^\.|[^\d\.]/g, '')"
                                                    autocomplete="off"
                                                    placeholder="Enter amount" required>
                                                <button class="show-currency"></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn-custom btn2 btn-secondary close_invest_modal close__btn"
                                    data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn-custom investModalSubmitBtn">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        
        <div class="modal fade" id="sendOfferModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
             aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm">
                <form action="" method="post" id="invest-form" class="login-form send_offer_modal">
                    <input type="hidden" name="_token" value="ooQ3lA0eh9X0Q35blBVV1spggapqdTvuZntZVdqk">                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">Set Share Amount</h5>
                            <button type="button" class="close-btn close_invest_modal" data-bs-dismiss="modal"
                                    aria-label="Close">
                                <i class="fal fa-times"></i>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div class="card">
                                <div class="m-3 mb-0 payment-method-details property-title font-weight-bold">
                                </div>

                                <div class="card-body">
                                    <div class="row g-3 investModalPaymentForm">
                                        <div class="input-box col-12">
                                            <label for="">Share Amount</label>
                                            <div class="input-group">
                                                <input
                                                    type="text" class="invest-amount form-control " name="amount" id="amount"
                                                    value=""
                                                    onkeyup="this.value = this.value.replace (/^\.|[^\d\.]/g, '')"
                                                    autocomplete="off"
                                                    placeholder="Enter amount" required>
                                                <button class="show-currency" type="button"></button>
                                            </div>
                                                                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn-custom btn2 btn-secondary close_invest_modal close__btn"
                                    data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn-custom investModalSubmitBtn">Share</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        
        <div class="modal fade" id="updateOfferModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
             aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md">
                <form action="" method="post" id="invest-form" class="login-form update_offer_modal">
                    <input type="hidden" name="_token" value="ooQ3lA0eh9X0Q35blBVV1spggapqdTvuZntZVdqk">                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">Update Share Amount</h5>
                            <button type="button" class="close-btn close_invest_modal" data-bs-dismiss="modal"
                                    aria-label="Close">
                                <i class="fal fa-times"></i>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div class="card">
                                <div class="card-header payment-method-details property-title primary_color">
                                </div>

                                <div class="card-body">
                                    <div class="row g-3 investModalPaymentForm">
                                        <div class="input-box col-12">
                                            <label for="">Share Amount</label>
                                            <div class="input-group">
                                                <input
                                                    type="text" class="invest-amount form-control amount " name="amount" id="amount"
                                                    value=""
                                                    onkeyup="this.value = this.value.replace (/^\.|[^\d\.]/g, '')"
                                                    autocomplete="off"
                                                    placeholder="Enter amount" required>
                                                <button class="show-currency" type="button"></button>
                                            </div>
                                                                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn-custom btn2 btn-secondary close_invest_modal close__btn"
                                    data-bs-dismiss="modal">Close</button>
                            <button type="submit" class="btn-custom investModalSubmitBtn">Share</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/select2.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/range-slider.min.js' %}"></script>
<script src="{% static 'js/socialSharing.js' %}"></script>
<script src="{% static 'js/fancybox.umd.js' %}"></script>
<script src="{% static 'js/apexcharts.min.js' %}"></script>


<script src="{% static 'js/notiflix-aio-2.7.0.min.js' %}"></script>
<script src="{% static 'js/pusher.min.js' %}"></script>
<script src="{% static 'js/vue.min.js' %}"></script>
<script src="{% static 'js/axios.min.js' %}"></script>
<!-- custom script -->
<script src="{% static 'js/script.js' %}"></script>


<script>
    'use strict';

    $(".card-boxes").owlCarousel({
        loop: true,
        margin: -25,
        rtl: false,
        nav: false,
        dots: false,
        autoplay: false,
        autoplayTimeout: 3000,
        responsive: {
            0: {
                items: 1,
            },
            576: {
                items: 2,
            },
        },
    });

    // dashboard sidebar
    window.onload = function () {
        var el = document.getElementById('sidebarCollapse');
        if (el == null) {
            return 0;
        } else {

            el.addEventListener("click", () => {
                document.getElementById("sidebar").classList.toggle("active");
                document.getElementById("content").classList.toggle("active");
            });
        }

        // for datepicker
        $(function () {
            $("#datepicker").datepicker({
                dateFormat: "yy-mm-dd"
            });
            $("#salutation").selectmenu();
        });
    }

            let pushNotificationArea = new Vue({
        el: "#pushNotificationArea",
        data: {
            items: [],
        },
        mounted() {
            this.getNotifications();
            this.pushNewItem();
        },
        methods: {
            getNotifications() {
                let app = this;
                axios.get("https://real-estate.investprime.pro/user/push-notification-show")
                    .then(function (res) {
                        app.items = res.data;
                    })
            },
            readAt(id, link) {
                let app = this;
                let url = "https://real-estate.investprime.pro/user/push-notification-readAt/0";
                url = url.replace(/.$/, id);
                axios.get(url)
                    .then(function (res) {
                        if (res.status) {
                            app.getNotifications();
                            if (link != '#') {
                                window.location.href = link
                            }
                        }
                    })
            },
            readAll() {
                let app = this;
                let url = "https://real-estate.investprime.pro/user/push.notification.readAll";
                axios.get(url)
                    .then(function (res) {
                        if (res.status) {
                            app.items = [];
                        }
                    })
            },
            pushNewItem() {
                let app = this;
                let pusher = new Pusher("ed521a35961656f99f4c", {
                    encrypted: true,
                    cluster: "mt1"
                });
                let channel = pusher.subscribe('user-notification.' + "23");
                channel.bind('App\\Events\\UserNotification', function (data) {
                    app.items.unshift(data.message);
                });
                channel.bind('App\\Events\\UpdateUserNotification', function (data) {
                    app.getNotifications();
                });
            }
        }
    });
    
</script>

    <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
    <script>
        'use strict'
        $(document).ready(function (){
            $( ".datepicker" ).datepicker({
                autoclose: true,
                clearBtn: true
            });

            $('.from_date').on('change', function (){
                $('.to_date').removeAttr('disabled');
            });

            $(document).on('click', '.duePayment', function () {
                var propertyInvestModal = new bootstrap.Modal(document.getElementById('duePaymentModal'))
                propertyInvestModal.show();

                let symbol = "$";
                let dataRoute = $(this).data('route');
                let dataProperty = $(this).data('property');
                let dataFixedAmount = $(this).data('fixedamount');
                let dataPreviousPay = $(this).data('previouspay');
                let isInstallment = $(this).data('isinstallment');
                let totalInstallments = $(this).data('totalinstallments');
                let totalDueInstallments = $(this).data('dueinstallments');
                let installmentAmount = $(this).data('installmentamount');
                let installmentDuration = $(this).data('installmentduration') + ' ' + $(this).data('installmentdurationtype');
                let installmentLastDate = $(this).data('installmentlastdate');
                let getInstallmentDate = $(this).data('getinstallmentdate');
                let installmentLateFee = $(this).data('installmentlatefee');
                $('.show-currency').text("USD");

                $('.due_payment_modal').attr('action', dataRoute);
                $('.property-title').text( `Property: ${dataProperty}`);
                $('.fixed_invest').text(`${symbol}${dataFixedAmount}`);
                $('.total_installments').text(totalInstallments);
                $('.due_installments').text(totalDueInstallments);
                $('.installment_duration').text(installmentDuration);
                $('.installment_last_date').text(installmentLastDate);
                $('.installment_last_date').text(installmentLastDate);
                $('.installment_late_fee').text(`${symbol}${installmentLateFee}`);
                $('.previous_total_pay').text(`${symbol}${parseInt(dataPreviousPay)}`);
                let totalDueAmount = parseInt(dataFixedAmount) - parseInt(dataPreviousPay);
                $('.total_due_amount').text(`${symbol}${totalDueAmount}`);
                $('.installment_amount').text(`${symbol}${installmentAmount}`);



                if (isInstallment == 1 && totalDueInstallments > 1){
                    $('.set_installment_amount').val(installmentAmount);
                    $('.set_totalDue_amount').val(totalDueAmount);
                    $('.set_get_installment_date').val(getInstallmentDate);
                    $('.set_total_due_amount').val(totalDueAmount);
                    $('.set_installment_late_fee').val(installmentLateFee);
                    $('.payInstallment').removeClass('d-none');
                }

                if (getInstallmentDate == 0){
                    let dueAmountWithLateFee = parseInt(totalDueAmount) + parseInt(installmentLateFee);
                    $('.invest-amount').val(dueAmountWithLateFee);
                    $('#amount').attr('readonly', true);
                }else{
                    $('.invest-amount').val(totalDueAmount);
                    $('#amount').attr('readonly', true);
                }
            });


            $(document).on('click', '#pay_installment', function () {
                let getInstallmentDate = $('.set_get_installment_date').val();
                let installmentAmount = $('.set_installment_amount').val();
                let installmentLateFee = $('.set_installment_late_fee').val();
                let totalDueAmount = $('.set_total_due_amount').val();

                if ($(this).prop("checked") == true) {
                    $(this).val(1);
                    if (getInstallmentDate == 0){
                        let dueAmountWithLateFee = parseInt(installmentAmount) + parseInt(installmentLateFee);
                        $('.invest-amount').val(dueAmountWithLateFee);
                        $('#amount').attr('readonly', true);
                    }else{
                        $('.invest-amount').val(installmentAmount);
                        $('#amount').attr('readonly', true);
                    }

                } else {
                    $(this).val(0);
                    if (getInstallmentDate == 0){
                        let dueAmountWithLateFee = parseInt(totalDueAmount) + parseInt(installmentLateFee);
                        $('.invest-amount').val(dueAmountWithLateFee);
                        $('#amount').attr('readonly', true);
                    }else{
                        $('.invest-amount').val(totalDueAmount);
                        $('#amount').attr('readonly', true);
                    }
                }
            });

            $(document).on('click', '.close_invest_modal', function () {
                if ($('#pay_installment').prop("checked") == true) {
                    $("#pay_installment").prop("checked", false);
                }
            });

            $(document).on('click', '.sendOffer', function () {
                var propertysendOfferModal = new bootstrap.Modal(document.getElementById('sendOfferModal'))
                propertysendOfferModal.show();

                let dataRoute = $(this).data('route');
                let dataProperty = $(this).data('property');

                $('.send_offer_modal').attr('action', dataRoute);
                $('.property-title').text(`Property: ${dataProperty}`);
                $('.show-currency').text("USD");

            });

            $(document).on('click', '.updateOffer', function () {
                var propertyupdateOfferModal = new bootstrap.Modal(document.getElementById('updateOfferModal'))
                propertyupdateOfferModal.show();

                let dataRoute = $(this).data('route');
                let dataProperty = $(this).data('property');
                let amount = $(this).data('amount');
                $('.show-currency').text("USD");

                $('.update_offer_modal').attr('action', dataRoute);
                $('.property-title').text(`Property: ${dataProperty}`);
                $('.amount').val(amount);
            });
        });
    </script>





<script>
    "use strict";
    var root = document.querySelector(':root');
    root.style.setProperty('--primary', '#488ff9');
    root.style.setProperty('--secondary', '#488ff9');

</script>

</body>


</html>
